# Objective

In this Lab we will deploy a Mantl.io Container cluster onto your local machine.
This will provide a cloud-agnostic platform for running containerized or Docker applications.
From here, we will deploy a Sample application to the new cluster.

Completion time: 15-20 minutes

# Prerequisites

You must have git, Vagrant and Virtualbox for your environment installed.
If you are at a Cisco learninglabs booth, this has been done for you.
The steps are also curated for the Windows-based learninglabs environment. Screenshots and location of tools will differ if following this guide at home on Linux or Mac.

# Check the environment is clean

As the learninglab environments are shared; Lets quickly make sure there are no old Mantl clusters running on the machine.

First, go to ``` Start > All Programs > git > git bash ``` to open a command prompt (as shown below).

![Git Bash command prompt window](/posts/files/mantl-101/assets/images/git-bash.png)

Run the following command to remove any previous Mantl codebase downloaded.

``` rm -r mantl ```

Now, go to ``` Start > All Programs > Oracle VirtualBox > Virtualbox ``` to open up the VirtualBox VM Manager.
This should have no 'mantl' named Virtual Machines showing in the Left bar, if it does, right click them and choose "remove" from the menu. You can delete all files if prompted.

![Empty Virtualbox Screenshot](/posts/files/mantl-101/assets/images/virtualbox-empty.png)

# Clone the Mantl repository

Now we have a clean environment, it's time to deploy our own Mantl cluster, first, clone the Mantl codebase using git. In the command prompt we opened earlier, type:

``` git clone https://github.com/ciscocloud/mantl ```

![Clone the Mantl Repository](/posts/files/mantl-101/assets/images/clone-mantl.png)

Once the download is complete, tell git to use the latest stable release of the codebase (otherwise we will end up deploying an untested development version) by typing the following command:

``` git checkout 1.0.2 ```

Your prompt should now show the following;

![Git showing we have release 1.0.2 checked out](/posts/files/mantl-101/assets/images/git-cli-102.png)

# Check the Configuration

Now we can configure our deployment. Type in the command ``` notepad.exe Vagrantfile ``` to open the configuration file (called 'Vagrantfile') in a text editor.
Ensure you set the line ``` "edge_count" => 0 ``` to ``` => 1 ``` and save the file. This allows us to bring up a full mantl cluster (instead of just the core components).

![Set mantl edge nodes configuration](/posts/files/mantl-101/assets/images/vagrantfile-notepad.png)

Once you have saved the configuration file ``` File > save ```, close notepad, otherwise you wont be able to type subsequent commands on the command prompt.

# Setup Security

Mantl is aimed at enterprise container deployments in the field, as such, we don't ship it with default passwords or security certificates as this leaves default installations open to hackers.

Instead, there is a security-setup script that creates all the necessary security items for you, per deployment.

Usually, we would run this python script to generate a 'security.yml' file (which the deployment code uses) like so: ``` python security-setup ```.
This will then ask you for information about your deployment, etc.
However, to keep all the demos consistent in this scenario, we can download an existing demo-secuiry.yml file as follows:

``` /c/python27/Scripts/pip2 install -r requirements.txt ```
``` /c/python27/python security-setup ```

# Deploy Mantl!

![Vagrant needs updating](/posts/files/mantl-101/assets/images/vagrant-version-error.png)
